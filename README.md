# stw
Small library for making web based applications.

# Features
- HTTP server.
- HTTP client.
- Web socket implementation for client and server.
- Template generator that lets you mix HTML and C++.

# Requirements for Linux
- libcurl (libcurl.so)
- libssl (libssl.so)
- libcrypto (libcrypto.so)

# Requirements for Windows
- libcurl (libcurl-x64.dll)
- libssl (libssl-3-x64.dll)
- libcrypto (libcrypto-3-x64.dll)

No linking is required with any libraries, but on Linux you must have these libraries somewhere in your system path. On Windows you must place the dll files in the same directory as the executable. MacOS is not fully supported (yet).

# Generating certificate with openssl
```
openssl req -newkey rsa:4096 -x509 -sha256 -days 3650 -nodes -out cert.pem -keyout key.pem
```

# Mixing HTML and C++
Sure, the code highlighting isn't super great, and your code editor won't offer any code completion. On top of that, this abomination can be cumbersome to debug. That said, don't act like this isn't a cool feature!

```php
<?cpp
	std::string title = "Example website";
?>

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title><?cpp echo(title); ?></title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #f4f4f4;
            margin: 0;
            padding: 20px;
        }
        h1 {
            color: #333;
        }
        h3 {
            color: #333;
        }
        p {
            color: #666;
        }
        footer {
            margin-top: 20px;
            font-size: 0.8em;
            color: #888;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
        }
        th, td {
            border: 1px solid #ddd;
            padding: 12px; /* Increased padding for better visibility */
            text-align: left; /* Ensuring left alignment for all text */
        }
        th {
            background-color: #f2f2f2;
            font-weight: bold; /* Bold text for headers */
        }
        tr:nth-child(even) {
            background-color: #f9f9f9; /* Alternate row color for better readability */
        }
    </style>
</head>
<body>
	<h1>Simple web page</h1>
    <p>This is an example of a page generated by a template.</p>
	
    <table>
        <thead>
            <tr>
                <th>Header</th>
                <th>Value</th>
            </tr>
        </thead>
        <tbody>
            <?cpp for(const auto& [key, value] : get_headers()) { ?>
                <tr>
                    <td><?cpp echo(key); ?></td>
                    <td><?cpp echo(value); ?></td>
                </tr>
            <?cpp } ?>
        </tbody>
    </table>

    <footer>
        <p>Powered by stw</p>
    </footer>
</body>
</html>
```

To generate a header file from this template (or even multiple in a directory), you can do something like this:
```cpp
#include "stw_templ.hpp"

int main()
{
	const char *inputDirectory = "path/to/template_directory";
	const char *outputDirectory = "path/to/output_directory";

	try
	{
		stw::templ::create_templates(inputDirectory, outputDirectory, "hpp");
	}
	catch(const std::runtime_error &ex)
	{
		std::cout << ex.what() << '\n';
	}

	return 0;
}
```
If successful, the generated files will be in the output directory. The class names will have the form `name_view.hpp`. You can now use this file in your project like so:

```cpp
#include "stw_http_server.hpp"
#include "index_view.html" //Assuming you have a class called index_view

int main()
{
	stw::http_server server;
	stw::http_server_configuration config;

	if(!config.load_from_file("config.ini"))
		return 1;

	server.onRequest = [this] (stw::http_connection *connection, const stw::http_request_info &request) {
		if(request.path == "/index")
		{
			index_view view;
			auto response = view.get(&request);
			connection->write_response(stw::http_status_code_ok, &response->headers, response->content.data(), response->content.size(), "text/html");
		}
		else
		{
			connection->write_response(stw::http_status_code_not_found);
		}
	};

	server.run(config);

	return 0;
}
```

# Disclaimer
This library is just for educational purposes.
